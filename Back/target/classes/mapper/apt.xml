<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.apt.model.mapper.AptMapper">


<!--
<select id="aptList" parameterType="AptInfo" resultType="AptInfo">
	select aptCode, apartmentName, dealAmount, area, dealyear, dealmonth , dealday, lat, lng
	from house
	where dealyear=#{dealyear} and dealMonth=#{dealmonth} and dongCode=#{dongCode}
</select>
  -->  
  
	<resultMap type="AptInfo" id="aptInfo">
		<result column="aptCode" property="aptCode"/>
		<result column="apartmentName" property="apartmentName"/>
		<result column="dealAmount" property="dealAmount"/>
		<result column="area" property="area"/>
		<result column="dealyear" property="dealyear"/>
		<result column="dealmonth" property="dealmonth"/>
		<result column="dealday" property="dealmonth"/>
		<result column="lat" property="lat"/>
		<result column="lng" property="lng"/>
	</resultMap>
	
<select id="aptList" parameterType="string" resultType="aptInfo">
	select aptCode, apartmentName, dealAmount, area, dealyear, dealmonth , dealday, lat, lng
	from house
	where dongCode=#{dongCode}
</select>

<select id="searchByAptName" parameterType="string" resultType="aptInfo">
	select aptCode, apartmentName, dealAmount, area, dealyear, dealmonth , dealday, lat, lng
	from house
	where apartmentName like CONCAT('%',#{keyword},'%')
</select>

  
<select id="insertFavArea" parameterType="map">
	insert into interest_address(user_id, dongCode) values (#{userId}, #{dongCode});
</select>


<select id="deleteFavArea" parameterType="map">
	delete from interest_address where user_id=#{userId} and dongCode=#{dongCode}
</select>

<select id="insertFavApt" parameterType="map">
	insert into interest_apt(user_id, aptCode) values (#{userId}, #{aptCode});
</select>

<select id="deleteFavApt" parameterType="map">
	delete from interest_apt where user_id=#{userId} and aptCode=#{aptCode}
</select>
  
 </mapper>